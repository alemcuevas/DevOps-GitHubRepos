## üîê 6.5 Gesti√≥n de accesos y uso de Service Connections

Controlar qui√©n puede hacer qu√© en un proyecto DevOps es fundamental para mantener la seguridad y trazabilidad. Azure DevOps ofrece herramientas robustas para la **gesti√≥n de accesos** y la integraci√≥n segura con recursos externos mediante **Service Connections**.

---

### üë• Gesti√≥n de accesos en Azure DevOps

#### Roles comunes:

- **Project Readers**: solo lectura del proyecto
- **Contributors**: pueden editar repos, crear work items, modificar pipelines
- **Project Administrators**: control total sobre configuraci√≥n y permisos
- **Stakeholders**: visibilidad limitada (no t√©cnicos)

#### Buenas pr√°cticas:

- Usa **grupos de seguridad** para asignar roles (no usuarios individuales)
- Aplica el principio de **m√≠nimo privilegio**
- Revisa accesos de forma peri√≥dica
- Habilita auditor√≠a y control de cambios si es necesario
- Documenta roles y responsabilidades por equipo

---

### üåê ¬øQu√© es una Service Connection?

Una **Service Connection** es una entidad segura que permite a un pipeline de Azure DevOps acceder a otros servicios externos como:

- Azure (mediante Service Principal o Managed Identity)
- GitHub
- Docker Hub
- AWS, GCP
- Jenkins, SonarCloud, Artifactory, etc.

---

### üîí Tipos de autenticaci√≥n para Azure

1. **Service Principal (SPN)**  
   - Recomendado para automatizaci√≥n  
   - Usa un app registration + client secret o certificado

2. **Managed Identity (MSI)**  
   - M√°s seguro y administrado por Azure  
   - No requiere manejo manual de secretos

3. **Azure Resource Manager (ARM)**  
   - Modelo moderno para despliegues automatizados

---

### üõ†Ô∏è Buenas pr√°cticas para Service Connections

- Usa nombres descriptivos: `SC-Azure-Prod`, `SC-DockerHub`
- Aplica **restricciones por entorno**: no usar la misma conexi√≥n para `dev` y `prod`
- Restringe el uso de la conexi√≥n solo a los pipelines autorizados
- Usa **MSI** si el agente es un recurso de Azure
- No compartas tokens o secrets usados por las conexiones
- Rota regularmente los secretos si usas SPN con client secret
- Documenta qu√© pipelines y entornos usan cada Service Connection

---

### ‚úÖ Ejemplo de uso t√≠pico

- Pipeline que despliega a Azure App Service:
  - Usa una **Service Connection** del tipo `Azure Resource Manager`
  - Autenticado mediante SPN con rol `Contributor` solo sobre el resource group espec√≠fico

---

### üìö Recursos adicionales

- [Administrar Service Connections](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints)
- [Roles y permisos en Azure DevOps](https://learn.microsoft.com/en-us/azure/devops/organizations/security/permissions)
- [Configurar autenticaci√≥n con SPN](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/connect-to-azure)

