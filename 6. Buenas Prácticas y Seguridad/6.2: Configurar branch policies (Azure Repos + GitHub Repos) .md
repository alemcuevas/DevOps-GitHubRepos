## ğŸ” 6.2 Configurar branch policies (Azure Repos + GitHub Repos)

Las **branch policies** o polÃ­ticas de rama son un mecanismo esencial para proteger el cÃ³digo en ramas crÃ­ticas como `main`, `develop` o `release`. Tanto Azure Repos como GitHub Repos permiten establecer reglas que aseguren revisiones, validaciones y trazabilidad antes de integrar cambios.

---

### ğŸ§  Objetivos de las branch policies

- Forzar revisiones de cÃ³digo antes del merge
- Ejecutar pipelines de validaciÃ³n
- Requerir work items vinculados (Azure Boards)
- Proteger ramas contra cambios directos
- Garantizar la calidad y trazabilidad del cÃ³digo

---

### ğŸ”· Azure Repos â€“ PolÃ­ticas disponibles

1. **Revisores obligatorios**  
   Define cuÃ¡ntas personas deben aprobar un Pull Request.

2. **Build validation**  
   Ejecuta una pipeline antes de permitir el merge.

3. **Comment resolution**  
   No permite completar PR si hay comentarios abiertos.

4. **Work item linking**  
   Requiere vincular AB#ID a un work item.

5. **RestricciÃ³n de tipos de merge**  
   Por ejemplo: permitir solo squash o merge normal.

6. **Aprobaciones caducan si cambia el cÃ³digo**

7. **Revisores automÃ¡ticos por rutas especÃ­ficas**

8. **Bloqueo de push directo a la rama**

---

### ğŸŸ£ GitHub Repos â€“ Branch protection rules

1. **Require pull request before merging**  
   - Define nÃºmero mÃ­nimo de revisores  
   - Permite limitar a miembros especÃ­ficos

2. **Require status checks to pass before merging**  
   - IntegraciÃ³n con GitHub Actions o externos (SonarCloud, ESLint)

3. **Require linear history**  
   - Evita merges con commits paralelos o sin squash

4. **Restrict who can push to matching branches**  
   - Permite solo a ciertos equipos o bots

5. **Include administrators**  
   - Las reglas aplican tambiÃ©n a propietarios del repo

6. **Signed commits y DCO (Developer Certificate of Origin)**

---

### ğŸ“Š Comparativa rÃ¡pida

| FunciÃ³n                             | Azure Repos âœ… | GitHub Repos âœ… |
|------------------------------------|----------------|----------------|
| Revisores obligatorios             | âœ…              | âœ…              |
| ValidaciÃ³n de build                | âœ… (Pipelines)  | âœ… (Actions)    |
| Work items requeridos              | âœ…              | âŒ              |
| Comentarios deben resolverse       | âœ…              | âŒ (manual)     |
| Bloqueo de push directo            | âœ…              | âœ…              |
| RestricciÃ³n por carpeta/ruta       | âœ…              | âœ…              |
| Aprobaciones por ruta automÃ¡tica   | âœ…              | âŒ              |
| IntegraciÃ³n con polÃ­ticas externas | âœ…              | âœ…              |

---

### âœ… Buenas prÃ¡cticas para ambos entornos

- Define al menos 1 revisor obligatorio por PR
- Exige que todas las builds pasen antes de hacer merge
- Desactiva el push directo a `main`, `release` o `hotfix`
- En Azure Repos, obliga la vinculaciÃ³n con work items para trazabilidad
- En GitHub, considera firmar los commits y proteger con reglas a nivel de organizaciÃ³n
- Documenta quÃ© polÃ­ticas aplican por proyecto o por equipo

---

### ğŸ“š Recursos adicionales

- [Azure Repos - Branch policies](https://learn.microsoft.com/en-us/azure/devops/repos/git/branch-policies)  
- [GitHub - Branch protection rules](https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-protected-branches)

