## ğŸ” 3.3 PolÃ­ticas de ramas y revisiÃ³n de cÃ³digo en Azure Repos

Las polÃ­ticas de ramas en Azure Repos permiten establecer **reglas y condiciones** para controlar cÃ³mo se integran los cambios en ramas crÃ­ticas como `main` o `release`. Estas polÃ­ticas mejoran la calidad del cÃ³digo, fortalecen la colaboraciÃ³n y previenen errores comunes en equipos distribuidos.

---

## ğŸ§  Â¿QuÃ© es una polÃ­tica de rama?

Una polÃ­tica de rama define **restricciones y validaciones** que deben cumplirse antes de permitir un merge (fusiÃ³n) de cÃ³digo hacia esa rama. Su objetivo principal es **proteger el cÃ³digo fuente** y garantizar estÃ¡ndares de calidad y seguridad.

---

## ğŸ“ Tipos de polÃ­ticas disponibles

| PolÃ­tica                          | Â¿QuÃ© controla?                                                             |
|-----------------------------------|----------------------------------------------------------------------------|
| âœ… **Minimum number of reviewers** | NÃºmero mÃ­nimo de aprobaciones requeridas para fusionar un PR               |
| ğŸ”„ **Check for linked work items** | Obliga a vincular un work item (por ejemplo `AB#123`)                      |
| ğŸ’¬ **Check for comment resolution** | No permite merge si hay comentarios sin resolver en el PR                 |
| ğŸ§ª **Build validation**            | Ejecuta una pipeline CI y permite merge solo si el build es exitoso       |
| âœ… **Status checks**               | Integraciones externas como SonarCloud, ESLint o escaneo de secretos       |
| ğŸ”€ **Limit merge types**          | Restringe a un solo tipo de merge: squash, rebase o normal                 |
| ğŸ“… **Expiration of approvals**     | Revoca aprobaciones si se hacen cambios al PR despuÃ©s de ser aprobado     |
| ğŸ“Œ **Automatically include reviewers** | Agrega revisores por defecto en ciertas rutas del repositorio            |

---

## ğŸ§ª Flujo de trabajo comÃºn con polÃ­ticas activas

```plaintext
1. Desarrollador crea una rama: feature/login
2. Hace commits y push al repositorio remoto
3. Abre un Pull Request hacia main
4. Azure DevOps:
   â”œâ”€ Ejecuta un pipeline de CI
   â”œâ”€ Verifica reviewers asignados
   â”œâ”€ Valida que estÃ© vinculado a un work item (AB#123)
   â””â”€ Espera aprobaciÃ³n sin comentarios pendientes
5. Si todo pasa, se habilita el botÃ³n "Complete PR"
```

---

## ğŸ§ª Ejemplo de configuraciÃ³n recomendada para `main`

Una configuraciÃ³n robusta de polÃ­ticas sobre la rama `main` puede verse asÃ­:

- âœ… **2 revisores obligatorios**
- â³ **Aprobaciones expiran** si el cÃ³digo cambia despuÃ©s del review
- ğŸ“¦ **ValidaciÃ³n automÃ¡tica con pipeline** (ej. `build-ci-app`)
- ğŸ”— **Work item requerido** para mantener trazabilidad con Azure Boards
- ğŸ” **Comentarios deben estar resueltos** antes de permitir el merge
- ğŸ”’ **Push directo deshabilitado**: todos los cambios deben pasar por Pull Request

---

## âœ… Beneficios clave de aplicar polÃ­ticas

- ğŸ§ª **Asegura calidad** antes de integrar cÃ³digo en ramas crÃ­ticas
- ğŸ‘¥ **Fomenta colaboraciÃ³n** entre miembros del equipo mediante revisiÃ³n cruzada
- ğŸ”¬ **Detecta errores temprano** mediante pruebas automatizadas y revisiones (shift-left testing)
- ğŸ”— **Mejora la trazabilidad** entre tareas de planificaciÃ³n y cÃ³digo real
- ğŸ› ï¸ **Reduce conflictos y regresiones** en producciÃ³n

---

## ğŸ›¡ï¸ Buenas prÃ¡cticas en polÃ­ticas de revisiÃ³n

- ğŸš« No permitir excepciones manuales, salvo casos documentados y justificados
- âš™ï¸ Aplicar las polÃ­ticas de forma **automatizada**, no mediante acuerdos informales
- ğŸ§© Usar **status checks externos** como SonarCloud, ESLint o escÃ¡neres de seguridad
- ğŸ”€ Forzar el uso de **Pull Requests para todo cambio**, sin push directo a `main`
- ğŸ§­ Documentar el **flujo de aprobaciÃ³n** por equipo, Ã¡rea de cÃ³digo o tipo de cambio

---

## ğŸ“š Recursos adicionales

- [ğŸ“˜ PolÃ­ticas de ramas en Azure Repos](https://learn.microsoft.com/en-us/azure/devops/repos/git/branch-policies)
- [ğŸ“‹ RevisiÃ³n de Pull Requests](https://learn.microsoft.com/en-us/azure/devops/repos/git/pull-requests)
- [âœ… Status checks en PRs](https://learn.microsoft.com/en-us/azure/devops/repos/git/status-policy)
- [ğŸ” Seguridad en control de versiones](https://learn.microsoft.com/en-us/azure/devops/repos/git/security)

